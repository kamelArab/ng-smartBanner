/*! 
 * ng-smartBanner v0.0.0
 * 
 * Copyright (c) 2014 
 * License: 
 */
angular.module("ng-smartBanner",[]).provider("BannerOptions",function(){this.bannerOptions={},this.$get=function(){var a=this.bannerOptions;return{options:function(){var b=angular.extend({title:"",author:"",price:"FREE",bodyText:"In Google Play",urlStore:"",icon:"",buttonTexte:"View",storageName:"bannerSave",daysHidden:15,daysReminder:90},a);return b}}},this.setBannerOptions=function(a){this.bannerOptions=a}}).directive("smartBanner",function(a,b,c){function d(b,d){var e=c.options(),f=JSON.parse(localStorage.getItem(e.storageName));if(b.showBanner=!0,f&&(e.daysHidden&&0!==e.daysHidden||e.daysReminder&&0!==e.daysReminder)){var g=864e5;if(f.daysHiddenDate){var h=(new Date).getTime()-f.daysHiddenDate;if(h/g<e.daysHidden)return}if(f.daysReminderDate){var h=(new Date).getTime()-f.daysReminderDate;if(h/g<e.daysReminder)return}}if(b.closeBanner=function(){localStorage.setItem(e.storageName,JSON.stringify({daysHiddenDate:(new Date).getTime()})),b.showBanner=!1},b.installBanner=function(){localStorage.setItem(e.storageName,JSON.stringify({daysReminderDate:(new Date).getTime()}))},""===e.title||""===e.author||""===e.icon)throw new Error("title, author, icon must be defined");if(""===e.urlStore)throw new Error("You must defined url of store (urlStore)");var i='<div class="shown" id="smartbanner" style="top: 0px;" ng-show="showBanner"><div class="sb-container"><a class="sb-close" ng-click="closeBanner()" >&times;</a>',j=e.icon?'<span class="sb-icon" style="background-image: url(&quot;'+e.icon+'&quot;);"></span>':"",k='<div class="sb-info"><strong>'+e.title+"</strong><span>"+e.author+"</span>";k=k+"<span>"+e.price+" - "+e.bodyText+"</span></div>";var l='<a href="'+e.urlStore+'" ng-click="installBanner()" class="sb-button"><span>'+e.buttonTexte+"</span></a>",m=angular.element(i+j+k+l+"</div></div>");d.append(m),a(d.contents())(b)}return{restrict:"E",replace:!0,link:d}});